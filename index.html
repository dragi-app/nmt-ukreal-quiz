<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Старт-тест НМТ (українська мова)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary:#8e44ad;
      --primary-light:#f5ecff;
      --secondary:#ff8c32;
      --bg:#f7f7fb;
      --radius:14px;
      --max-width:900px;
    }
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;font-family:"Nunito",Arial,Helvetica,sans-serif;background:var(--bg);color:#222;padding:20px}
    h1{font-weight:700;text-align:center;color:var(--primary);margin-bottom:12px}
    #timer{display:inline-block;padding:6px 18px;font-size:1.1rem;font-weight:700;color:#fff;background:var(--primary);border-radius:999px;margin:0 auto 28px;box-shadow:0 2px 6px rgba(0,0,0,.12)}
    form{max-width:var(--max-width);margin:0 auto;padding:0 10px}
    .card{
      border-radius:14px;
      background:#fff;
      box-shadow:0 4px 10px rgba(0,0,0,.05);
      padding:20px 24px;
      margin-bottom:26px;
    }
    .task-title{
      font-weight:700;
      font-size:1rem;
      color:#333;
      margin:0;
      line-height:1.3;
      overflow-wrap:anywhere;
      white-space: pre-wrap;
    }
    fieldset{position:relative;border:none;border-radius:14px;background:#fff;box-shadow:0 4px 10px rgba(0,0,0,.05);padding:24px 24px 16px;margin-bottom:26px}
    legend{
      position:absolute;
      left:-9999px;
      width:1px;
      height:1px;
      overflow:hidden;
    }
    label.option{display:flex;align-items:flex-start;gap:10px;width:100%;margin:8px 0;padding:10px 14px;border:2px solid transparent;border-radius:14px;cursor:pointer;transition:background .2s,border .2s;position:relative}
    label.option:hover{background:var(--primary-light)}
    label.option.chosen{border-color:var(--primary);background:var(--primary-light)}
    .option.correct{border-color:#2e7d32;background:#e6f4ea}
    .radio-wrap{position:relative;flex:0 0 24px;height:24px}
    .radio-wrap input{position:absolute;inset:0;opacity:0;cursor:pointer}
    .radio-disk{width:24px;height:24px;border:2px solid #bbb;border-radius:50%;display:inline-block;pointer-events:none;transition:border .2s,background .2s;position:relative}
    .option.correct .radio-disk{border-color:#2e7d32;background:#2e7d32}
    .option.correct .radio-disk::after{content:"";position:absolute;inset:6px;background:#fff;border-radius:50%}
    .matching-grid{display:flex;flex-direction:column;gap:12px;margin-top:12px}
    .match-row{display:flex;align-items:flex-start;gap:10px;margin:6px 0;flex-wrap:wrap}
    .match-left{flex:1;min-width:220px;font-weight:600;word-break:break-word}
    .match-right{flex:0 0 220px}
    .match-right select{width:100%;padding:6px;border-radius:8px;border:1px solid #ccc;font-size:0.95rem}
    #submitBtn{display:block;width:100%;max-width:380px;margin:36px auto 14px;padding:14px 0;font-size:1.05rem;font-weight:600;color:#fff;background:var(--primary);border:none;border-radius:999px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.15);transition:background .2s,transform .1s}
    #submitBtn:hover{background:var(--secondary)}
    #submitBtn:active{transform:scale(.97)}
    #result{max-width:950px;margin:0 auto;text-align:center;background:#fff;padding:36px 28px;border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    #score{
      font-size:0.95rem;
      font-weight:600;
      color:#444;
      margin-bottom:4px;
    }
    #scaledScore{
      font-size:1.35rem;
      font-weight:700;
      color:var(--primary);
      margin:4px 0;
    }
    .recommendation-block{
      white-space:pre-line;
      line-height:1.2;
      margin-top:6px;
      font-size:0.95rem;
    }
    .match-feedback{
      margin-top:6px;
      font-size:.9rem;
    }
    .correct-pair{
      color:#2e7d32;
      font-weight:600;
    }
    .incorrect-pair{
      color:#c62828;
      font-weight:600;
    }
    button.reload{margin-top:28px;background:var(--secondary);color:#fff;border:none;padding:12px 20px;border-radius:999px;cursor:pointer}
    .subinfo{font-size:.9rem;color:#555;margin-top:4px}
  </style>
</head>
<body>
  <h1>Старт-тест НМТ з української мови</h1>
  <div id="timer">Залишилось — 60:00</div>

  <form id="quizForm" aria-label="Тест з 30 завдань">
    <div id="questionsContainer"></div>

    <!-- TODO: вставити додаткові блоки/завдання (напр. есе, відкриті відповіді тощо) тут -->

    <button id="submitBtn" type="button">Завершити тест</button>
  </form>

  <div id="result" style="display:none" aria-live="polite">
    <h2>Результати тесту</h2>
    <p id="score"></p>
    <p id="scaledScore"></p>
    <div id="recommendation" class="recommendation-block"></div>
    <button class="reload" onclick="location.reload()">Спробувати ще раз</button>
  </div>

  <script>
  (function(){
    "use strict";
    const total = 60*60;
    const timer = document.getElementById("timer");
    const form = document.getElementById("quizForm");
    const result = document.getElementById("result");
    const submit = document.getElementById("submitBtn");
    let s = total;
    const it = setInterval(()=>{
      if(s<=0){ finish(); return; }
      const m = String(Math.floor(s/60)).padStart(2,"0"), sec = String(s%60).padStart(2,"0");
      timer.textContent = `Залишилось — ${m}:${sec}`;
      s--;
    },1000);

    const scaleMap = {
      7:100,8:105,9:110,10:115,11:120,12:125,13:131,14:134,15:136,
      16:138,17:140,18:142,19:143,20:144,21:145,22:146,23:148,24:149,
      25:150,26:152,27:154,28:156,29:157,30:159,31:160,32:162,33:163,
      34:165,35:167,36:170,37:172,38:175,39:177,40:180,41:183,42:186,
      43:191,44:195,45:200
    };

    function getScaledScore(raw){
      if(raw >= 7){
        if(scaleMap[raw] !== undefined) return scaleMap[raw];
        if(raw > 45) return 200;
      }
      return Math.round( (raw / 7) * 100 );
    }

    const introInvestment = `1. Визначаючись з інвестуванням, зважають на незалежність вартості вибраного обʼєкта від політичної ситуації в державі, захищеність від утручання третіх сторін у процес володіння та розпорядження ним тощо.
2. Таку ситуацію пояснюють нестабільністю курсів, тому громадяни прагнуть вкладати кошти в іноземну валюту, коштовні речі, нерухомість та дорогоцінні метали.
3. Отже, цифрова валюта стає популярною в деяких країнах, відтак формують інфраструктуру її продажу через термінали, розширюють мережу комерційних і виробничих структур, які уможливлюють розрахунок електронними грішми.
4. Останнім часом дехто вважає, що бажаним критеріям відповідає новий інструмент фінансового ринку – електронні гроші, основними перевагами яких є конфіденційність, незалежність від держави, відсутність територіальних і часових обмежень у трансакціях, низька вартість обслуговування.
5. У період поглиблення кризових явищ у світовій економіці, люди в багатьох країнах часто уникають заощаджень у національних грошових одиницях.`;

    const questions = [
      {
        id: "q1",
        type: "mcq",
        prompt: "1. Префікс с- треба писати в усіх словах рядка",
        options: {
          A: "..качати, ..формувати, ..поконвіків",
          B: "..товщення, ..жалитися, ..поєний",
          C: "..цідження, ..худнути, ..тягнення",
          D: "..підлоба, ..чеплений, ..касування"
        },
        correct: "A",
        answerText: "А) ..качати, ..формувати, ..поконвіків"
      },
      {
        id: "q2",
        type: "mcq",
        prompt: "2. Подвоєні букви треба писати у формі орудного відмінка однини в усіх словах рядка.",
        options: {
          A: "папороть, сіль, велич, стриманість",
          B: "магістраль, мазь, мігрень, мідь",
          C: "верф, паралель, подорож, ціль",
          D: "кров, заметіль, емаль, світлотінь"
        },
        correct: "B",
        answerText: "Б) магістраль, мазь, мігрень, мідь"
      },
      {
        id: "q3",
        type: "mcq",
        prompt: "3. Букву и треба писати на місці пропуску в усіх словах рядка",
        options: {
          A: "мер..діан, теор..тичний, др..жати",
          B: "х..мерний, завм..рання, д..ригент",
          C: "тр..вожний, абр..кос, м..тушливий",
          D: "височ..на, вiдгр..міти, ч..рговий"
        },
        correct: "B",
        answerText: "Б) х..мерний, завм..рання, д..ригент"
      },
      {
        id: "q4",
        type: "mcq",
        prompt: "4. НЕМАЄ орфографічних помилок у варіанті",
        options: {
          A: "Починаймо кожен ранок із подяки за все, що маємо, атже так ми вчимося цінувати дорогоціні миті, відчуваємо любов та турботу рідних, помічаємо щедрість світу.",
          B: "Щоб почуватися щасливими, не потрібно шукати перо жарптиці: ви маєте лише дотримуватися кількох простих порад, перетворивши їх на щоденні ритуали.",
          C: "Щодня знаходьмо джерело радості, щоб наповнитися силою, накопичити позитивну енергію для нових справ, подолання тимчасових труднощів і підкорення вершин.",
          D: "Поважаймо не лише власний вибір, а й погляди та переконання інших людей, щохвилинно пам’ятаючи, що кожен із нас має не заперечне право бути собою."
        },
        correct: "C",
        answerText: "В) Щодня знаходьмо джерело радості, щоб наповнитися силою, накопичити позитивну енергію для нових справ, подолання тимчасових труднощів і підкорення вершин."
      },
      {
        id: "q5",
        type: "mcq",
        prompt: "5. Правильно виділено букви на позначення наголошених голосних у всіх словах рядка, ОКРІМ:",
        options: {
          A: "д[и]влячись у дов[і]дник, завчас[у] занест[и]",
          B: "нов[і] жалюз[і], зобраз[и]ти триз[у]б",
          C: "щодобов[е] завд[а]ння, кор[и]сна кропив[а]",
          D: "фахов[и]й катал[о]г, багатораз[о]ві витр[а]ти"
        },
        correct: "D",
        answerText: "Г) фахов[и]й катал[о]г, багатораз[о]ві витр[а]ти"
      },
      {
        id: "q6",
        type: "mcq",
        prompt: "6. Разом треба писати всі слова в рядку",
        options: {
          A: "до/нині, за/надто, до/вподоби",
          B: "без/упину, на/весні, від/тоді",
          C: "у/літку, по/тихеньку, на/вічно",
          D: "на/чисто, з/ранку, в/основному"
        },
        correct: "C",
        answerText: "В) у/літку, по/тихеньку, на/вічно"
      },
      {
        id: "q7",
        type: "mcq",
        prompt: "7. Апостроф треба писати на місці пропуску в усіх словах рядка, ОКРІМ:",
        options: {
          A: "підв..ялений, арф'ярка, роз'їхатися",
          B: "верб'я, подзв'якувати, перем'ятий",
          C: "під'юджувати, солов'їний, стерв'ятник",
          D: "між'ярусний, сузір'я, розм'якшити"
        },
        correct: "B",
        answerText: "Б) верб'я, подзв'якувати, перем'ятий"
      },
      {
        id: "q8",
        type: "mcq",
        prompt: "8. Однаковий звук позначають букви, виділені в кожному слові рядка",
        options: {
          A: "контрастний, шістдесят, четвер",
          B: "здається, молотьба, батько",
          C: "подружка, дужечка, джгутовий",
          D: "рюкзак, аґрус, ґрунтознавець"
        },
        correct: "D",
        answerText: "Г) рюкзак, аґрус, ґрунтознавець"
      },
      {
        id: "q9",
        type: "mcq",
        prompt: "9. Префікс від- має однакове значення в усіх словах, ОКРІМ",
        options: {
          A: "Відробити",
          B: "Відлетіти",
          C: "Відповзти",
          D: "Відбігти",
          E: "Відплисти"
        },
        correct: "A",
        answerText: "А) Відробити"
      },
      {
        id: "q10",
        type: "mcq",
        prompt: "10. Лексична помилка є в рядку",
        options: {
          A: "здійснити перевірку",
          B: "ухвалити рішення",
          C: "співставити факти",
          D: "підбити підсумки",
          E: "взяти на себе"
        },
        correct: "C",
        answerText: "В) співставити факти"
      },
      {
        id: "q11",
        type: "mcq",
        prompt: "11. Прочитайте речення (цифра позначає попередній розділовий знак). Серіал «І будуть люди» побудовано у формі саги,(1) і в ній крізь призму життя звичайних людей показано турбулентні етапи XX століття:(2) Першу світову війну,(3) прихід радянської влади,(4) які кожен герой сприйняв з позиції власної правди,(5) проте всіх дійових осіб обʼєднало бажання знайти своє місце в новому історичному вимірі. НЕПРАВИЛЬНО обґрунтовано вживання розділових знаків у рядку:",
        options: {
          A: "кома 1 – між частинами складного речення, що поєднані сурядним звʼязком",
          B: "двокрапка 2 – після узагальнювального слова",
          C: "кома 3 – при однорідних членах речення",
          D: "кома 5 – між частинами складного речення, що поєднані безсполучниковим звʼязком",
          E: "кома 4 – між частинами складного речення, що поєднані підрядним звʼязком"
        },
        correct: "D",
        answerText: "Д) кома 5 – між частинами складного речення, що поєднані безсполучниковим звʼязком"
      },
      {
        id: "q12",
        type: "mcq",
        prompt: "12. Редагування потребує речення",
        options: {
          A: "Беручи в руки звичайний олівець з гумкою, ви ніколи не подумаєте, що людство витратило на цей винахід близько тисячоліття.",
          B: "Ще стародавні греки послуговувалися графітовими паличками, використовуючи їх для малювання.",
          C: "Потім секрет виготовлення було втрачено, і лише ураганом 1565-го року, промчавши англійським графством Камберленд, було відкрито родовище невідомого матеріалу – графіту.",
          D: "У 1858-му році Хаймен Ліпман з Філадельфії запатентував олівець з гумкою, відтак кожен отримав можливість писати, одразу витираючи помилки.",
          E: "Цікаво, що експериментатори використали до кінця один олівець середньої твердості, написавши 45 тисяч слів."
        },
        correct: "C",
        answerText: "В) Потім секрет виготовлення було втрачено, і лише ураганом 1565-го року, промчавши англійським графством Камберленд, було відкрито родовище невідомого матеріалу – графіту."
      },
      {
        id: "q13",
        type: "mcq",
        prompt: "13. НЕМАЄ лексичної помилки в реченні",
        options: {
          A: "Багато хто з нас мріяв добитися великого успіху й зайняти вище місце в суспільному житті.",
          B: "Часто ми не придаємо значення відношенням з людьми, що, однак, розкривають суть і нашого «я».",
          C: "Кожна слідуюча сходинка життя опирається на результати нашого попереднього розвитку.",
          D: "Чиста совість мотивує людину на вчинки, які ніколи не змусять жалкувати про здійснене.",
          E: "Коли посторонні люди замічають наші позитивні риси, це тішить і надихає на гарні вчинки."
        },
        correct: "D",
        answerText: "Г) Чиста совість мотивує людину на вчинки, які ніколи не змусять жалкувати про здійснене."
      },
      {
        id: "q14",
        type: "mcq",
        prompt: "14. НЕПРАВИЛЬНО оформлено пряму мову в реченні",
        options: {
          A: "«Щоб стати особистістю, – стверджував український філософ Іван Бойченко, – потрібно знайти, виховати й навчити себе, визначити власне місце в суспільстві, стати його частиною і чинити гідно».",
          B: "«Фізкультура повернула мені все: серце, гнучкість, витривалість! — говорив учений-медик Микола Амосов і наголошував: — Але головне — працездатність, мабуть, найдорожче з усього, чим живе людина».",
          C: "Відомий педагог Василь Сухомлинський писав: «Самовиховання потребує кількох важливих могутніх стимулів: почуття власної гідності, поваги до себе, бажання стати сьогодні кращим, ніж був учора».",
          D: "«Найкращою характеристикою людини є мета, якої вона прагне» — уважав римський філософ Марк Аврелій.",
          E: "«Хто просувається в науках, але відстає в морай, той іде радше назад, ніж уперед!» — наголошував знаний давньогрецький філософ Арістотель."
        },
        correct: "D",
        answerText: "Г) «Найкращою характеристикою людини є мета, якої вона прагне» — уважав римський філософ Марк Аврелій."
      },
      {
        id: "q15",
        type: "mcq",
        prompt: "15. Синонімом до слова \"достойний\" є",
        options: {
          A: "схожий",
          B: "вартісний",
          C: "цінний",
          D: "гідний",
          E: "певний"
        },
        correct: "D",
        answerText: "Г) гідний"
      },
      {
        id: "q16",
        type: "mcq",
        prompt: "16. Повідомляти _______ курсів водіння про _____________ наслідки порушень на автошляхах так само важливо, як і навчати _______ дорожнього руху.",
        options: {
          A: "слухачам, самі ймовірні, правил",
          B: "слухачів, найбільш імовірніші, правилам",
          C: "слухачів, найімовірніші, правил",
          D: "слухачам, найімовірні, правилам",
          E: "слухачів, найбільш імовірні, правилам"
        },
        correct: "C",
        answerText: "В) слухачів, найімовірніші, правил"
      },
      {
        id: "q17",
        type: "mcq",
        prompt: "17. Демонстрація модних ______ нової колекції ______ відбудеться через _______.",
        options: {
          A: "пальт, Тараса Демиденка, півтори місяці",
          B: "пальто, Тараса Демиденка, півтора місяців",
          C: "пальто, Тараса Демиденко, півтора місяця",
          D: "пальт, Тараса Демиденка, півтора місяця",
          E: "пальт, Тараса Демиденка, півтора місяці"
        },
        correct: "D",
        answerText: "Г) пальт, Тараса Демиденка, півтора місяця"
      },
      {
        id: "q18",
        type: "mcq",
        prompt: "18. Цьогоріч ________ чотири _______ смородини на _______ ділянку, а любисток, навпаки, – у затінок.",
        options: {
          A: "пересаджу, кущів, світлішу",
          B: "пересажу, кущі, більш світлішу",
          C: "пересажду, куща, більш світлу",
          D: "пересаджу, кущі, світлішу",
          E: "пересаджу, куща, більш світлу"
        },
        correct: "D",
        answerText: "Г) пересаджу, кущі, світлішу"
      },
      {
        id: "q19",
        type: "mcq",
        prompt: "19. Медичний безпілотник набирає швидкість близько ________ kілометрів за годину й підвищує шанси на виживання під час серцевого нападу ________ відсотків.",
        options: {
          A: "дев’яноста, від восьми до восьмидесятьох",
          B: "дев’яносто, від вісьми до вісімдесяти",
          C: "дев’яносто, від восьми до вісімдесяти",
          D: "дев’яноста, від вісьми до вісімдесяти",
          E: "дев’яноста, від восьми до вісімдесяти"
        },
        correct: "E",
        answerText: "Д) дев’яноста, від восьми до вісімдесяти"
      },
      {
        id: "q20",
        type: "mcq",
        prompt: "20. ________, сестра знову експериментувала на кухні й приготувала кольрабі, ________ у вершковому соусі.",
        options: {
          A: "Андрій, тушковану",
          B: "Андрію, тушковану",
          C: "Андріє, тушковане",
          D: "Андрію, тушковане",
          E: "Андріє, тушкований"
        },
        correct: "B",
        answerText: "Б) Андрію, тушковану"
      },
      {
        id: "q21",
        type: "mcq",
        prompt: `21. ${introInvestment}\nОднорідні підмети є в реченні, позначеному`,
        options: {
          A: "1",
          B: "2",
          C: "3",
          D: "4",
          E: "5"
        },
        correct: "D",
        answerText: "Г) 4"
      },
      {
        id: "q22",
        type: "mcq",
        prompt: `22. ${introInvestment}\nПрикладка є в реченні, позначеному`,
        options: {
          A: "1",
          B: "2",
          C: "3",
          D: "4",
          E: "5"
        },
        correct: "D",
        answerText: "Г) 4"
      },
      {
        id: "q23",
        type: "mcq",
        prompt: `23. ${introInvestment}\nПунктуаційна помилка є в реченні, позначеному:`,
        options: {
          A: "1",
          B: "2",
          C: "3",
          D: "4",
          E: "5"
        },
        correct: "E",
        answerText: "Д) 5"
      },
      {
        id: "q24",
        type: "mcq",
        prompt: `24. ${introInvestment}\nУ формі знахідного відмінка вжито всі слова, ОКРІМ:`,
        options: {
          A: "утручання",
          B: "процес",
          C: "кошти",
          D: "термінали",
          E: "період"
        },
        correct: "A",
        answerText: "А) утручання"
      },
      {
        id: "q25",
        type: "mcq",
        prompt: `25. ${introInvestment}\nПервинний текст буде відновлено, якщо речення розташувати в послідовності, запропонованій у рядку:`,
        options: {
          A: "5 → 1 → 2 → 4 → 3",
          B: "5 → 3 → 1 → 4 → 2",
          C: "5 → 2 → 4 → 1 → 3",
          D: "5 → 3 → 4 → 1 → 2",
          E: "5 → 2 → 1 → 4 → 3"
        },
        correct: "E",
        answerText: "Д) 5 → 2 → 1 → 4 → 3"
      },
      {
        id: "match1",
        type: "matching",
        prompt: "26. Поєднайте виділені фрагменти простих (1–4) і складних (А–Д) речень за подібністю синтаксичного значення.",
        left: [
          "1. Посткросинг – проєкт, створений [для обміну] листівками між представниками різних країн.",
          "2. Незнайомці [випадковим чином] надсилають одне одному поштівки з різними зображеннями.",
          "3. [Після реєстрації] на спеціальному сайті вони отримують пʼять адрес із різних куточків світу.",
          "4. [Завдяки популярності] посткросингу на ринку України зʼявилися надзвичайно цікаві витвори сучасних ілюстраторів."
        ],
        right: [
          "А) Листівки надсилають людям з різних континентів, [щоб розповісти про себе, рідні місця, своє захоплення].",
          "Б) Найціннішими є тексти на звороті поштівок, [адже написані вони від руки й передають частинку душі адресанта].",
          "В) Часто відправники намагаються зробити так, [щоб їхня листівка була особливою], наприклад, виготовляють її власноруч.",
          "Г) [Якщо під час реєстрації ви написали про свої вподобання], то участь у посткросингу стає ще цікавішою.",
          "Д) [Коли проєкт набрав обертів], учасники почали обмінюватися ще й марками, світлинами, улаштовувати конкурси, лотереї."
        ],
        correctMap: {
          0: 0,
          1: 2,
          2: 4,
          3: 1
        }
      },
      {
        id: "match2",
        type: "matching",
        prompt: "27. З’ясуйте, яким членом речення (А – Д) є виділені в реченні слова (1–4).",
        left: [
          "1. що",
          "2. обабіч",
          "3. то",
          "4. шарудіння"
        ],
        right: [
          "А) іменник",
          "Б) сполучник",
          "В) прийменник",
          "Г) займенник",
          "Д) прислівник"
        ],
        correctMap: {
          0: 3,
          1: 4,
          2: 1,
          3: 0
        }
      },
      {
        id: "match3",
        type: "matching",
        prompt: "28. Доберіть приклад (А – Д) до кожного типу відокремленого члена речення (1–4).",
        left: [
          "1. додаток",
          "2. обставина",
          "3. означення",
          "4. прикладка (різновид означення)"
        ],
        right: [
          "А) Заварюємо зелений чай, проціджуємо його в невелику посудину, накриваємо та ставимо на вогонь.",
          "Б) У чай додаємо спеції, зокрема кардамон, тертий імбир, гвоздику, і тримаємо на слабкому вогні хвилин двадцять.",
          "В) Наприкінці додаємо для аромату лимонний чи апельсиновий сік, вичавлений незадовго до вживання.",
          "Г) Далі чай знімаємо з вогню й удруге проціджуємо, даючи напоєві охолонути.",
          "Д) Чай краще пити гарячим, хоч і холодним він не втратить свого шарму – легкого східного смаку."
        ],
        correctMap: {
          0: 1,
          1: 3,
          2: 2,
          3: 4
        }
      },
      {
        id: "match4",
        type: "matching",
        prompt: "29. Доберіть приклад (А – Д) до кожного типу складного речення (1–4).",
        left: [
          "1. Складносурядне",
          "2. Складнопідрядне",
          "3. Безсполучникове",
          "4. З різними видами зв’язку"
        ],
        right: [
          "А) Деякі мешканці савани, а саме: антилопи, зебри – утворюють табуни та своєю чисельністю відлякують хижаків.",
          "Б) Газель схожа на оленя, але вона граційніша та має характерні роги, вигнуті у форму ліри.",
          "В) Жирафа – найвища тварина на планеті: її зріст сягає п’яти метрів.",
          "Г) Хоча носороги мають слабкий зір, проте цю їхню ваду компенсують добре розвинуті інші зовнішні чуття (слух та нюх).",
          "Д) Людиноподібні мавпи мають високий рівень інтелекту, у них розвинені певні мовні навички, а шимпанзе – один з найрозумніших приматів."
        ],
        correctMap: {
          0: 1,
          1: 3,
          2: 2,
          3: 4
        }
      },
      {
        id: "match5",
        type: "matching",
        prompt: "30. Доберіть до кожного речення (1–4), у якому зроблено пропуск, відповідний за значенням фразеологізм (А–Д).",
        left: [
          "1. Коли вирішуєте [...] приготування їжі, варто враховувати індивідуальні потреби й смакові вподобання кожного члена родини.",
          "2. Рекомендуємо назавжди [...], складаючи меню на тиждень, одночасно плануйте список того, що треба купити.",
          "3. Наявність плану харчування й списку покупок допомагає [...] та не блукати між вітринами в пошуках необхідного.",
          "4. Готуйте для рідних із задоволенням, експериментуйте і можете не [...] іноді невдалих результатів кулінарних експромтів."
        ],
        right: [
          "А) взяти втямки",
          "Б) взяти голову в руки",
          "В) брати ноги на плечі",
          "Г) взяти на себе",
          "Д) брати близько до серця"
        ],
        correctMap: {
          0: 3,
          1: 0,
          2: 1,
          3: 4
        }
      }
    ];

    const container = document.getElementById("questionsContainer");

    questions.forEach((q, idx)=>{
      const fs = document.createElement("fieldset");
      fs.dataset.qid = q.id;
      fs.setAttribute("aria-label", `Питання ${q.id}`);
      const legend = document.createElement("legend");
      legend.textContent = q.prompt.replace(/\*\*/g,"");
      fs.appendChild(legend);

      const cardTitle = document.createElement("p");
      cardTitle.className = "task-title";
      cardTitle.innerHTML = q.prompt;
      fs.appendChild(cardTitle);

      if(q.type === "mcq"){
        fs.dataset.correct = q.correct;
        fs.dataset.answerText = q.answerText || mapLetter(q.correct);
        Object.entries(q.options).forEach(([key, text])=>{
          const label = document.createElement("label");
          label.className = "option";
          label.setAttribute("aria-label", `Варіант ${key}`);
          label.innerHTML = `
            <span class="radio-wrap">
              <span class="radio-disk"></span>
              <input type="radio" name="${q.id}" value="${key}" />
            </span>
            <strong>${letterDisplay(key)}</strong> ${text}
          `;
          fs.appendChild(label);
        });
      } else if(q.type === "matching"){
        fs.dataset.type = "matching";
        fs.dataset.correctMap = JSON.stringify(q.correctMap);
        const grid = document.createElement("div");
        grid.className = "matching-grid";

        q.left.forEach((leftText, li)=>{
          const row = document.createElement("div");
          row.className = "match-row";
          const leftDiv = document.createElement("div");
          leftDiv.className = "match-left";
          leftDiv.textContent = leftText;

          const rightDiv = document.createElement("div");
          rightDiv.className = "match-right";
          const select = document.createElement("select");
          select.name = `${q.id}_item${li}`;
          const emptyOpt = document.createElement("option");
          emptyOpt.value = "";
          emptyOpt.textContent = "—";
          select.appendChild(emptyOpt);
          q.right.forEach((rightText, ri)=>{
            const opt = document.createElement("option");
            opt.value = ri;
            opt.textContent = rightText;
            select.appendChild(opt);
          });
          rightDiv.appendChild(select);
          row.appendChild(leftDiv);
          row.appendChild(rightDiv);
          grid.appendChild(row);
        });

        fs.appendChild(grid);
        const info = document.createElement("div");
        info.className = "subinfo";
        info.textContent = "За кожну правильну пару — 1 бал.";
        fs.appendChild(info);
      }

      container.appendChild(fs);
    });

    form.addEventListener("change", e=>{
      if(e.target.matches("input[type=radio]")){
        const name = e.target.name;
        form.querySelectorAll(`input[name="${name}"]`).forEach(i=>{
          const lbl = i.closest("label.option");
          lbl && lbl.classList.remove("chosen");
        });
        const chosenLabel = e.target.closest("label.option");
        chosenLabel && chosenLabel.classList.add("chosen");
      }
    });

    submit.addEventListener("click", finish);
    form.addEventListener("submit", e=>{ e.preventDefault(); finish(); });

    function finish(){
      clearInterval(it);
      form.querySelectorAll("input, select").forEach(i=>i.disabled=true);
      calc();
      result.style.display="block";
      window.scrollTo({top:0,behavior:"smooth"});
    }

    function calc(){
      let rawScore = 0;
      questions.forEach((q, idx)=>{
        if(q.type === "mcq"){
          const fs = document.querySelector(`fieldset[data-qid="${q.id}"]`);
          const selectedInput = fs.querySelector(`input[name="${q.id}"]:checked`);
          const selectedValue = selectedInput ? selectedInput.value : null;
          const correct = q.correct;
          const correctLabel = fs.querySelector(`input[value="${correct}"]`)?.closest("label.option");
          if(correctLabel){
            correctLabel.classList.add("correct");
          }
          if(selectedValue === correct){
            rawScore += 1;
          }
        } else if(q.type === "matching"){
          const fs = document.querySelector(`fieldset[data-qid="${q.id}"]`);
          const correctMap = JSON.parse(fs.dataset.correctMap);
          let correctPairs = 0;
          const existingFeedback = fs.querySelector(".match-feedback");
          if(existingFeedback) existingFeedback.remove();
          const feedbackDiv = document.createElement("div");
          feedbackDiv.className = "match-feedback";
          q.left.forEach((leftText, li)=>{
            const select = fs.querySelector(`select[name="${q.id}_item${li}"]`);
            const chosen = select ? select.value : "";
            const expected = String(correctMap[li]);
            const rowFeedback = document.createElement("div");
            if(chosen === expected){
              correctPairs +=1;
              rowFeedback.innerHTML = `✔ ${leftText} — ${q.right[expected]}`;
              rowFeedback.classList.add("correct-pair");
            } else {
              rowFeedback.innerHTML = `✖ ${leftText} — обране: ${chosen !== "" ? q.right[chosen] : "немає"}; правильне: ${q.right[expected]}.`;
              rowFeedback.classList.add("incorrect-pair");
            }
            feedbackDiv.appendChild(rowFeedback);
          });
          rawScore += correctPairs;
          fs.appendChild(feedbackDiv);
        }
      });

      const totalPossible = 25 + 5*4;
      const scoreEl = document.getElementById("score");
      if(rawScore < 7){
        scoreEl.textContent = `Сирий бал: ${rawScore} із ${totalPossible} — не склав(ла).`;
      } else {
        scoreEl.textContent = `Сирий бал: ${rawScore} із ${totalPossible}.`;
      }
      const scaled = getScaledScore(rawScore);
      document.getElementById("scaledScore").innerHTML = `<strong style="color: var(--primary)">За 100–200 бальною шкалою: ${scaled}.</strong>`;

      const recEl = document.getElementById("recommendation");
      if(scaled < 170){
        recEl.innerHTML = `<p><b>Не задоволений(а) результатом?</b></p>\nУ нас є рішення!\n<p><b>Завантажуй застосунок Драгі</b> та отримуй доступ до унікальної, суперефективної та цікавої методики навчання просто у себе в телефоні🤓</p>\n<p><b>Спробуй першу тему безкоштовно!</b></p>`;
      } else {
        recEl.innerHTML = `<p><b>Покращи свої результати у форматі ефективної гри👇</b></p>\n<p><b>Завантажуй застосунок Драгі</b> та отримуй доступ до унікальної, суперефективної та цікавої методики навчання просто у себе в телефоні🤓</p>\n<p>Спробуй першу тему <b>безкоштовно!</b></p> І удачі на шляху до Просунутого рівня!😇`;
      }
    }

    function rec(raw, tot){
      const p = raw / tot * 100;
      if(p>=80) return "Чудово! Ваш рівень підготовки дуже високий.";
      if(p>=55) return "Непогано, але потренуйтеся ще.";
      return "Показник низький: приділіть увагу теорії.";
    }

    function mapLetter(val){
      return {A:"А",B:"Б",C:"В",D:"Г",E:"Д"}[val] || val;
    }
    function letterDisplay(val){
      const map = {A:"А)",B:"Б)",C:"В)",D:"Г)",E:"Д)"};
      return map[val] || val;
    }
    function letterFromIndex(idx){
      const m = {0:"А",1:"Б",2:"В",3:"Г",4:"Д"};
      return m[String(idx)] || idx;
    }

  })();
  </script>
</body>
</html>
